define("@widget/LAYOUT/c/bs-headerTreatments-89ca44b0.js",["exports","@widget/LAYOUT/c/bs-overlayTypes"],(function(e,r){"use strict";const n=[1,1.5,2,3],t=/[.-]wsimg\.com\//;function o(e){return!!t.test(e)}function i(e){let r;if(!e||!o(e))return r;const t=[],i=e.split(/(h:|w:)([\d.]+)(,|\/|$)/g),a=i.length;let c=0;for(let e=2;e<a;e+=4)n.forEach(((r,n)=>{t[n]=(t[n]||"")+i.slice(c,e).join("")+parseFloat(i[e])*r})),c=e+1;try{r=t.map(((r,t)=>{if(r+=i.slice(c,a).join(""),1!==n[t])r+=` ${n[t]}x`;else if(r!==e)throw new Error([e,r]);return r})).join(",\n")}catch(e){}return r||void 0}function a(e){return e?e.split("/").filter(Boolean).map((e=>{const[r,n]=e.split("=");return{name:r,value:n}})):[]}function c(e){return null==e?[]:"string"==typeof e?a(e):Array.isArray(e)?e:Object.entries(e).map((([e,r])=>({name:e,value:r})))}function l(e){return o(e)?e:function(e=""){return e.split("/:/")[0]}(e)}const{headerTreatments:{FILL:u,FIT:s,INSET:g,BLUR:f,LEGACY_BLUR:d}}=(global.Core||guac["@wsb/guac-widget-core"]).constants;e.BLUR=f,e.CDN_REGEX=t,e.FILL=u,e.FIT=s,e.INSET=g,e.LEGACY_BLUR=d,e.addImageApiArgs=function(e,r){const n=function(e){if(!o(e))return null;const[r,n]=e.split("/:/");return{source:r,operations:a(n)}}(e);return null==n?e:function({source:e,operations:r}){if(null==r)return e;const n=r.map((({name:e,value:r})=>null==r?e:`${e}=${r}`)).join("/");return n?e+"/:/"+n:e}({source:n.source,operations:[...n.operations,...c(r)]})},e.generateBackgroundUrl=function(e,r=!0){return l(r?(global.Core||guac["@wsb/guac-widget-core"]).utils.generateBackgroundUrl(e):(global.Core||guac["@wsb/guac-widget-core"]).utils.generateBackgroundUrl(e).replace(/\/rs=w:{width},h:{height},cg:true,m\/cr=w:{width},h:{height},a[x]?:[^/]*/,"").replace(/\/:$/,""))},e.getSrcSet=i,e.getVCTScript=function(e){if(!e)return"";const n=(i(e)||"").replace(/(\n)/gm," ");return`(function(){${r.countVctElement};var i=new Image();i.onload=window.markVisuallyComplete;i.srcset="${n||e}";i.src="${e}";})()`},e.getValidUrl=l,e.isInternalUrl=o,e.replaceImageSizeParams=function(e,r=""){return e&&"string"==typeof e?e.replace(/\/:\/rs=w:[0-9]*,h:[0-9]*/,r):""},e.resolveImageSource=function(e,r,n){return"string"==typeof((null==e?void 0:e.imageUrl)||(null==e?void 0:e.image))?(global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl(e):null!=n&&n.fallbackBackgroundImageSrc?n.fallbackBackgroundImageSrc.replace(/\{(width|height)\}/g,"+0"):r||""}})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-headerTreatments-89ca44b0.js.map
